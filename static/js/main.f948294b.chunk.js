(this["webpackJsonponline-shop"]=this["webpackJsonponline-shop"]||[]).push([[0],{121:function(e,t,n){},214:function(e,t,n){e.exports=n(406)},219:function(e,t,n){},406:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(32),o=n.n(c),i=(n(219),n(121),n(88)),u=n(18),l={cartBooks:[]},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case" ADD_TO_CART":return e.cartBooks.some((function(e){return e.id===t.book.product.id}))?Object(u.a)(Object(u.a)({},e),{},{cartBooks:e.cartBooks.map((function(e){return e.id===t.book.product.id?Object(u.a)(Object(u.a)({},e),{},{count:e.count+1}):e}))}):Object(u.a)(Object(u.a)({},e),{},{cartBooks:[].concat(Object(i.a)(e.cartBooks),[Object(u.a)(Object(u.a)({},t.book.product),{},{count:1})])});case"REMOVE_FROM_CART":return Object(u.a)(Object(u.a)({},e),{},{cartBooks:e.cartBooks.map((function(e){return e.id===t.id?Object(u.a)(Object(u.a)({},e),{},{count:e.count-1}):e})).filter((function(e){return e.count>0}))});default:return e}},f=n(21),m=n(420),b=n(203),E=n(35),d=n(408),h=function(e){return a.a.createElement(m.a,{itemsPerRow:4},a.a.createElement(b.a,{src:e.book.image,wrapped:!0,ui:!1}),a.a.createElement(m.a.Content,null,a.a.createElement(m.a.Header,null,e.book.title),a.a.createElement(m.a.Meta,null,a.a.createElement("span",{className:"date"},e.book.author))),a.a.createElement(m.a.Content,{extra:!0},a.a.createElement("a",null,a.a.createElement(E.a,{name:"usd"}),e.book.price)),a.a.createElement(d.a,{onClick:function(){var t;t=e.book,e.addToCart({product:t,count:1})},color:"green"}," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"))},p=Object(f.b)(null,(function(e){return{addToCart:function(t){e(function(e){return{type:" ADD_TO_CART",book:e}}(t))}}}))(h),k=n(90),O=n.n(k),v=n(112),j=n.n(v),g=n(189),y=n(190),w=n.n(y),C=function(){return w.a.get("https://nomen1.github.io/online-shop/books.json")},_={books:[]},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOOKS":return{books:t.books};default:return e}},B=n(421),F=n(417),R=n(418),S=n(419),I=function(e){var t=e.cartBooks.map((function(t){return a.a.createElement(R.a,null,a.a.createElement(R.a.Image,{size:"tiny",src:t.image}),a.a.createElement(R.a.Content,null,a.a.createElement(R.a.Header,{as:"a"},t.title),a.a.createElement(R.a.Meta,null,t.author),a.a.createElement(R.a.Extra,null,"(",t.count,") \u0448\u0442."),a.a.createElement(d.a,{onClick:function(){var n;n=t.id,e.deleteFromCart(n)},color:"red"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))}));return a.a.createElement(R.a.Group,null,a.a.createElement(S.a.Content,null,a.a.createElement(S.a.Header,null,"\u041a\u043e\u0440\u0437\u0438\u043d\u0430")),t)},L=Object(f.b)((function(e){return{cartBooks:e.cart.cartBooks}}),(function(e){return{deleteFromCart:function(t){e(function(e){return{type:"REMOVE_FROM_CART",id:e}}(t))}}}))(I);var M=function(e){var t=function(){};return a.a.createElement(B.a,null,a.a.createElement(B.a.Menu,{position:"right"},a.a.createElement(B.a.Item,{name:"price",onClick:t},"\u0418\u0442\u043e\u0433\u043e ",e.totalPrice," ",a.a.createElement(E.a,{name:"usd"})),a.a.createElement(F.a,{content:a.a.createElement(L,null),on:"click",pinned:!0,trigger:a.a.createElement(B.a.Item,{name:"card",onClick:t}," ",a.a.createElement(E.a,{name:"shop"}),e.count)})))},x=Object(f.b)((function(e){return{totalPrice:e.cart.cartBooks.reduce((function(e,t){return e+t.price*t.count}),0),count:e.cart.cartBooks.reduce((function(e,t){return e+t.count}),0)}}))(M),Q=n(416),A=function(e){return{type:"SET_FILTER",filter:e}},P={filter:"all",searchQuery:" ",multiplyFilters:[]},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER":return Object(u.a)(Object(u.a)({},e),{},{filter:t.filter});case"SET_QUERY":return Object(u.a)(Object(u.a)({},e),{},{searchQuery:t.query});case"SET_MULTIPLY_FILTERS":return Object(u.a)(Object(u.a)({},e),{},{multiplyFilters:t.filters});default:return e}},D=n(89),U=n(414),Y=n(415),H=function(e){var t=e.setFilter,n=e.setQuery,c=Object(r.useState)([]),o=Object(D.a)(c,2),u=o[0],l=o[1],s=function(t,n){var r=u.indexOf(t),a=Object(i.a)(u);-1===r?a.push(t):a.splice(r,1),l(a),e.handleMultipleFilters(a,n)},f=function(e){t(e)};return a.a.createElement(B.a,{vertical:!0},a.a.createElement(U.a,{onChange:function(){return s("classic","multiplayFilter")},label:"\u041a\u043b\u0430\u0441\u0441\u0438\u043a\u0430"}),a.a.createElement(U.a,{onChange:function(){return s("scientific","multiplayFilter")},label:"\u041d\u0430\u0443\u0447\u043d\u0430\u044f \u043b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u0430"}),a.a.createElement(U.a,{onChange:function(){return s("modern","multiplayFilter")},label:"\u0421\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u043b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u0430"}),a.a.createElement(B.a.Item,{color:"blue",active:"all"===e.filter,onClick:function(){f("all")}},"\u0412\u0441\u0435"),a.a.createElement(B.a.Item,{color:"blue",active:"price_low"===e.filter,onClick:function(){f("price_low")}},"\u041f\u043e \u0446\u0435\u043d\u0435 (\u0434\u0435\u0448\u0435\u0432\u043b\u0435)"),a.a.createElement(B.a.Item,{color:"blue",active:"price_high"===e.filter,onClick:function(){f("price_high")}},"\u041f\u043e \u0446\u0435\u043d\u0435 (\u0434\u043e\u0440\u043e\u0436\u0435)"),a.a.createElement(B.a.Item,{color:"blue",active:"name"===e.filter,onClick:function(){f("name")}},"\u041f\u043e \u0430\u0432\u0442\u043e\u0440\u0443"),a.a.createElement(B.a.Item,null,a.a.createElement(Y.a,{value:e.query,onChange:function(e){var t,r;t="search",r=e.target.value,n(t,r)},className:"icon",icon:"search",placeholder:"Search..."})))},G=Object(f.b)((function(e){return{query:e.filter.rearchQuery,filter:e.filter.filter}}),(function(e){return{setFilter:function(t){e(A(t))},setQuery:function(t,n){e(function(e,t){return function(n){n(A(e)),n(function(e){return{type:"SET_QUERY",query:e}}(t))}}(t,n))},handleMultipleFilters:function(t,n){e(function(e,t){return function(n){n({type:"SET_MULTIPLY_FILTERS",filters:e}),n(A(t))}}(t,n))}}}))(H),J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.matchMedia(e).matches,n=Object(r.useState)(t),a=Object(D.a)(n,2),c=a[0],o=a[1];return Object(r.useEffect)((function(){var t=window.matchMedia(e);t.matches!==c&&o(t.matches);var n=function(){return o(t.matches)};return t.addListener(n),function(){return t.removeListener(n)}}),[e,c]),c},K=function(e){var t=J("(min-width: 1200px)");return a.a.createElement(Q.a,null,a.a.createElement(x,null),a.a.createElement(G,null),a.a.createElement(m.a.Group,{itemsPerRow:t&&8},e.books))},N=function(e,t,n,r){switch(t){case"price_high":return O()(e,"price","desc");case"price_low":return O()(e,"price","asc");case"name":return O()(e,"author","asc");case"search":return function(e,t){return e.filter((function(e){return e.title.toLowerCase().indexOf(t.toLowerCase())>=0||e.author.toLowerCase().indexOf(t.toLowerCase())>=0}))}(e,n);case"multiplayFilter":return function(e,t){return e.filter((function(e){return t.includes(e.genre)}))}(e,r);default:return e}},V=Object(f.b)((function(e){return{books:N(e.books.books,e.filter.filter,e.filter.searchQuery,e.filter.multiplyFilters)}}),(function(e){return{getBooks:function(){e(function(){var e=Object(g.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:n=e.sent,t({type:"SET_BOOKS",books:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){var t=e.books,n=e.getBooks;Object(r.useEffect)((function(){n()}),[]);var c=t.map((function(e,t){return a.a.createElement(p,{book:e,key:t})}));return a.a.createElement(K,{books:c})}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=n(51),z=n(200),$=Object(W.c)({books:T,cart:s,filter:q}),X=Object(W.d)($,Object(W.a)(z.a)),Z=(n(401),n(201)),ee=n.n(Z);o.a.render(a.a.createElement(ee.a,{basename:"https://nomen1.github.io/online-shop"},a.a.createElement(a.a.StrictMode,null,a.a.createElement(f.a,{store:X},a.a.createElement(V,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[214,1,2]]]);
//# sourceMappingURL=main.f948294b.chunk.js.map