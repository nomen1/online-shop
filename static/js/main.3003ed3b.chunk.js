(this["webpackJsonponline-shop"]=this["webpackJsonponline-shop"]||[]).push([[0],{117:function(e,t,n){},211:function(e,t,n){e.exports=n(404)},216:function(e,t,n){},404:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(31),o=n.n(c),u=(n(216),n(117),n(199)),i=n(17),l={cartBooks:[]},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case" ADD_TO_CART":return e.cartBooks.some((function(e){return e.id===t.book.product.id}))?Object(i.a)(Object(i.a)({},e),{},{cartBooks:e.cartBooks.map((function(e){return e.id===t.book.product.id?Object(i.a)(Object(i.a)({},e),{},{count:e.count+1}):e}))}):Object(i.a)(Object(i.a)({},e),{},{cartBooks:[].concat(Object(u.a)(e.cartBooks),[Object(i.a)(Object(i.a)({},t.book.product),{},{count:1})])});case"REMOVE_FROM_CART":return Object(i.a)(Object(i.a)({},e),{},{cartBooks:e.cartBooks.map((function(e){return e.id===t.id?Object(i.a)(Object(i.a)({},e),{},{count:e.count-1}):e})).filter((function(e){return e.count>0}))});default:return e}},f=n(20),m=n(417),b=n(198),d=n(41),E=n(406),h=function(e){return a.a.createElement(m.a,{itemsPerRow:4},a.a.createElement(b.a,{src:e.book.image,wrapped:!0,ui:!1}),a.a.createElement(m.a.Content,null,a.a.createElement(m.a.Header,null,e.book.title),a.a.createElement(m.a.Meta,null,a.a.createElement("span",{className:"date"},e.book.author))),a.a.createElement(m.a.Content,{extra:!0},a.a.createElement("a",null,a.a.createElement(d.a,{name:"usd"}),e.book.price)),a.a.createElement(E.a,{onClick:function(){var t;t=e.book,e.addToCart({product:t,count:1})},color:"green"}," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"))},p=Object(f.b)(null,(function(e){return{addToCart:function(t){e(function(e){return{type:" ADD_TO_CART",book:e}}(t))}}}))(h),k=n(86),O=n.n(k),v=n(109),j=n.n(v),g=n(185),w=n(186),C=n.n(w),y=function(){return C.a.get("https://nomen1.github.io/online-shop/books.json")},_={books:[]},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOOKS":return{books:t.books};default:return e}},T=n(418),R=n(415),I=n(416),S=function(e){var t=e.cartBooks.map((function(t){return a.a.createElement(I.a,null,a.a.createElement(I.a.Image,{size:"tiny",src:t.image}),a.a.createElement(I.a.Content,null,a.a.createElement(I.a.Header,{as:"a"},t.title),a.a.createElement(I.a.Meta,null,t.author),a.a.createElement(I.a.Extra,null,"(",t.count,") \u0448\u0442."),a.a.createElement(E.a,{onClick:function(){var n;n=t.id,e.deleteFromCart(n)},color:"red"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))}));return a.a.createElement(I.a.Group,null,t)},M=Object(f.b)((function(e){return{cartBooks:e.cart.cartBooks}}),(function(e){return{deleteFromCart:function(t){e(function(e){return{type:"REMOVE_FROM_CART",id:e}}(t))}}}))(S);var x=function(e){var t=function(){};return a.a.createElement(T.a,null,a.a.createElement(T.a.Menu,{position:"right"},a.a.createElement(T.a.Item,{name:"price",onClick:t},"\u0418\u0442\u043e\u0433\u043e ",e.totalPrice," ",a.a.createElement(d.a,{name:"usd"})),a.a.createElement(R.a,{content:a.a.createElement(M,null),on:"click",pinned:!0,trigger:a.a.createElement(T.a.Item,{name:"card",onClick:t}," ",a.a.createElement(d.a,{name:"shop"}),e.count)})))},F=Object(f.b)((function(e){return{totalPrice:e.cart.cartBooks.reduce((function(e,t){return e+t.price*t.count}),0),count:e.cart.cartBooks.reduce((function(e,t){return e+t.count}),0)}}))(x),L=n(413),Q=function(e){return{type:"SET_FILTER",filter:e}},A={filter:"all",searchQuery:" "},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER":return Object(i.a)(Object(i.a)({},e),{},{filter:t.filter});case"SET_QUERY":return Object(i.a)(Object(i.a)({},e),{},{searchQuery:t.query});default:return e}},D=n(412),P=function(e){var t=e.setFilter,n=e.setQuery,r=function(e){t(e)};return a.a.createElement(T.a,{vertical:!0},a.a.createElement(T.a.Item,{color:"blue",active:"all"===e.filter,onClick:function(){r("all")}},"\u0412\u0441\u0435"),a.a.createElement(T.a.Item,{color:"blue",active:"price_low"===e.filter,onClick:function(){r("price_low")}},"\u041f\u043e \u0446\u0435\u043d\u0435 (\u0434\u0435\u0448\u0435\u0432\u043b\u0435)"),a.a.createElement(T.a.Item,{color:"blue",active:"price_high"===e.filter,onClick:function(){r("price_high")}},"\u041f\u043e \u0446\u0435\u043d\u0435 (\u0434\u043e\u0440\u043e\u0436\u0435)"),a.a.createElement(T.a.Item,{color:"blue",active:"name"===e.filter,onClick:function(){r("name")}},"\u041f\u043e \u0430\u0432\u0442\u043e\u0440\u0443"),a.a.createElement(T.a.Item,null,a.a.createElement(D.a,{value:e.query,onChange:function(e){var t,r;t="search",r=e.target.value,n(t,r)},className:"icon",icon:"search",placeholder:"Search..."})))},G=Object(f.b)((function(e){return{query:e.filter.rearchQuery,filter:e.filter.filter}}),(function(e){return{setFilter:function(t){e(Q(t))},setQuery:function(t,n){e(function(e,t){return function(n){n(Q(e)),n(function(e){return{type:"SET_QUERY",query:e}}(t))}}(t,n))}}}))(P),H=n(200),J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.matchMedia(e).matches,n=Object(r.useState)(t),a=Object(H.a)(n,2),c=a[0],o=a[1];return Object(r.useEffect)((function(){var t=window.matchMedia(e);t.matches!==c&&o(t.matches);var n=function(){return o(t.matches)};return t.addListener(n),function(){return t.removeListener(n)}}),[e,c]),c},K=function(e){var t=J("(min-width: 1200px)");return a.a.createElement(L.a,null,a.a.createElement(F,null),a.a.createElement(G,null),a.a.createElement(m.a.Group,{itemsPerRow:t&&8},e.books))},N=function(e,t,n){switch(t){case"price_high":return O()(e,"price","desc");case"price_low":return O()(e,"price","asc");case"name":return O()(e,"author","asc");case"search":return function(e,t){return e.filter((function(e){return e.title.toLowerCase().indexOf(t.toLowerCase())>=0||e.author.toLowerCase().indexOf(t.toLowerCase())>=0}))}(e,n);default:return e}},U=Object(f.b)((function(e){return{books:N(e.books.books,e.filter.filter,e.filter.searchQuery)}}),(function(e){return{getBooks:function(){e(function(){var e=Object(g.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:n=e.sent,t({type:"SET_BOOKS",books:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){var t=e.books,n=e.getBooks;Object(r.useEffect)((function(){n()}),[]);var c=t.map((function(e,t){return a.a.createElement(p,{book:e,key:t})}));return a.a.createElement(K,{books:c})}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=n(50),W=n(195),Y=Object(V.c)({books:B,cart:s,filter:q}),z=Object(V.d)(Y,Object(V.a)(W.a)),$=(n(399),n(196)),X=n.n($);o.a.render(a.a.createElement(X.a,{basename:"https://nomen1.github.io/online-shop"},a.a.createElement(a.a.StrictMode,null,a.a.createElement(f.a,{store:z},a.a.createElement(U,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[211,1,2]]]);
//# sourceMappingURL=main.3003ed3b.chunk.js.map